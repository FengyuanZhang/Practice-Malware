import socket

PATH = '/home/derrick/Desktop/index3.jpeg' # This 
TARGET = []
HOST = '192.168.2.22'
PORT = 8080

def socket_image():
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((HOST, PORT))
    # I try to get the size from server side, which makes the function more flexible. But it always cannot
    # open the final result. I google this problem and I decide use a fixed size 
    # The URL: https://stackoverflow.com/questions/42458475/sending-image-over-sockets-only-in-python-image-can-not-be-open
    data = s.recv(9000)
    TARGET.append(data)

def deal_image():
    d = open (PATH, 'wb')
    for l in TARGET:
        d.write(l)

if __name__ == '__main__':
    socket_image()
    deal_image()
    print('Done')